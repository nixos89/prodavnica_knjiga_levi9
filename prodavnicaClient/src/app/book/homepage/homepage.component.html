<!-- Page Content -->
<div class="container at-da-top">
  <form>
    <div class="row">
      <div class="col-xs-6 col-md-4">
        <div class="input-group">
          <input
            type="text"
            name="search"
            class="form-control"
            placeholder="Search title or author"
            id="search"
            [(ngModel)]="search"
            (ngModelChange)="onSearch()"
          />
        </div>
      </div>
    </div>
  </form>
  <br />
  <div class="row" id="row1">
    <div class="col-lg-3 overflow-scroll">
      <!-- <aside class="sidebar"> -->
      <h3><i>Categories</i></h3>
      <!-- <div class="pre-scrollable"> -->
      <nav>
        <input
          type="checkbox"
          name="categoryId"
          [value]=""
          (change)="getAllBooks()"
        />
        All
        <fieldset *ngFor="let category of categoryData.categories">
          <input
            type="checkbox"
            name="categoryName"
            [value]="category.categoryId"
            [(ngModel)]="category.checked"
            (ngModelChange)="getAllBooksFromCategories()"
          />
          {{ category.name }}
        </fieldset>
      </nav>
      <!-- </div> -->
      <!-- </aside> -->
    </div>
    <!-- /.col-lg-3 -->

    <div class="col-lg-9">
      <div class="row">
        <!-- START::Card-->
        <div class="col-lg-3 col-md-6 mb-3" *ngFor="let book of bookData.books">
          <div class="card h-75 ">
            <div class="card-body card-body_style">
              <h5 class="card-title h4title">
                <b>{{ book.name }} </b>
                <small
                  ><a routerLink="admin/update-book/{{ book.bookId }}"
                    ><span class="glyphicon glyphicon-cog"></span></a
                ></small>
              </h5>
              <h5>Price: {{ book.price }} $</h5>
              <div *ngIf="book.authors.length > 1">
                <p>Authors:</p>
                <ol *ngFor="let author of book.authors" class="circle-style">
                  <i>{{ author.firstName }} {{ author.lastName }} </i>
                </ol>
              </div>
              <div *ngIf="book.authors.length == 1">
                <p>
                  Author:
                  <i
                    >{{ book.authors[0].firstName
                    }}{{ book.authors[0].lastName }}</i
                  >
                </p>
              </div>

              <div *ngIf="book.categories.length > 1">
                <p>Categories:</p>
                <ol *ngFor="let category of book.categories">
                  <li>{{ category.name }}</li>
                </ol>
              </div>
              <div *ngIf="book.categories.length === 1">
                <p>Category: {{ book.categories[0].name }}</p>
              </div>
              <div>
                <button
                  type="button"
                  class="btn btn-primary"
                  (click)="buyBook(book)"
                >
                  Instant Buy
                </button>
                <button
                  *ngIf="activeAddToCart.includes(book.bookId)"
                  type="button"
                  class="btn btn-primary btn-sm"
                  (click)="onAddToCart(book)"
                >
                  Add to cart
                </button>
              </div>
            </div>
          </div>
        </div>
        <!-- END::Card-->
      </div>
      <!-- /.row -->
    </div>
    <!-- /.col-lg-9 -->
  </div>
  <!-- /.row -->
</div>
<!-- /.container -->
